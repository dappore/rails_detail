$('#picture_<%= @picture.id %>').html('<%= j(render 'edit') %>');

attachToInput({
  input: 'picture_body',
  fileInput: 'picture_file',
  uploadUrl: '<%= detail_picture_path(params[:detail_type], params[:detail_id], @picture.id) %>',
  uploadFieldName: 'picture[file]',
  extraParams: {
    token: '',
    _method: 'patch'
  },
  extraHeaders: {
    'Accept': 'application/json',
    'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')
  },
  onFileUploaded: function (filename) {
    var img_content = new Image()
    img_content.src = filename
    img_content.classList = 'ui image'
    $('#<%= "picture_attachments_#{@picture.id}" %>').append(img_content);
  }
});