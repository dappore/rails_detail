$('#picture_<%= @picture.id %>').html('<%= j(render 'edit') %>');

class HelloController extends Stimulus.Controller {
  greet() {
    console.log("Hellos, Stimulus!", this.element)
  }

  connect() {
    console.log("Connects, Stimulus!", this.element)
    var app = this;
    attachToInput({
      input: 'picture_body',
      fileInput: 'picture_file',
      uploadUrl: '<%= detail_picture_path(params[:detail_type], params[:detail_id], @picture.id) %>',
      uploadFieldName: 'picture[file]',
      extraParams: {
        token: '',
        _method: 'patch'
      },
      extraHeaders: {
        'Accept': 'application/json',
        'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')
      },
      onFileUploaded: function (filename) {
        app.srcTargets[0].src = filename
      }
    });
  }
  
  
}
HelloController.targets = ['src']
const application = Stimulus.Application.start()
application.register('attachment', HelloController)
